<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get an Index of Available Argo Float Profiles — getIndex • argoFloats</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Get an Index of Available Argo Float Profiles — getIndex" />
<meta property="og:description" content="This function gets an index of available Argo float profiles, typically
for later use as the first argument to getProfiles(). The work is done
either by downloading information from a data repository or by reusing an existing
index (packaged within an .rda file) that is controlled by the age argument behind the scenes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">argoFloats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/argoFloats.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/qc.html">Handling Quality Control Flags and Adjusted Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ArgoCanada/argoFloats/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get an Index of Available Argo Float Profiles</h1>
    <small class="dont-index">Source: <a href='https://github.com/ArgoCanada/argoFloats/blob/master/R/get.R'><code>R/get.R</code></a></small>
    <div class="hidden name"><code>getIndex.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function gets an index of available Argo float profiles, typically
for later use as the first argument to <code><a href='getProfiles.html'>getProfiles()</a></code>. The work is done
either by downloading information from a data repository or by reusing an existing
index (packaged within an <code>.rda</code> file) that is controlled by the <code>age</code> argument behind the scenes.</p>
    </div>

    <pre class="usage"><span class='fu'>getIndex</span><span class='op'>(</span>
  filename <span class='op'>=</span> <span class='st'>"core"</span>,
  server <span class='op'>=</span> <span class='st'>"auto"</span>,
  destdir <span class='op'>=</span> <span class='st'>"~/data/argo"</span>,
  age <span class='op'>=</span> <span class='fl'>1</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>,
  keep <span class='op'>=</span> <span class='cn'>FALSE</span>,
  debug <span class='op'>=</span> <span class='fl'>0</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>filename</th>
      <td><p>character value that indicates the file name on the server, as in
the first column of the table given in &#8220;Details&#8221;, or (for some file types)
as in the nickname given in the middle column. Note that the downloaded
file name will be based on the full file name given as this argument, and
that nicknames are expanded to the full filenames before saving.</p></td>
    </tr>
    <tr>
      <th>server</th>
      <td><p>character value, or vector of character values, indicating
the name of servers that supply argo data.  If more than
one value is given, then these are tried sequentially until one
is found to supply the index file named in the <code>filename</code> argument.
As of October 2020, the two servers known to work are
<code>"ftp://ftp.ifremer.fr/ifremer/argo"</code> and <code>"ftp://usgodae.org/pub/outgoing/argo"</code>.
These may be referred
to with nicknames <code>"ifremer"</code>and  <code>"usgodae"</code>.  As a further
convenience, a third nickname (and the default for this argument)
is also available: <code>"auto"</code> is expanded to <code><a href='https://rdrr.io/r/base/c.html'>c("ifremer","usgodae")</a></code>.
Note that if a nickname is not used, the character value(s) in <code>server</code>
must start with <code>"ftp://"</code>.</p></td>
    </tr>
    <tr>
      <th>destdir</th>
      <td><p>character value indicating the directory in which to store
downloaded files. The default value of <code>"."</code> means to store the
downloaded file in the present working directory.  Set <code>destdir=NULL</code>
if <code>destfile</code> is a filename with full path information.
File clutter is reduced by creating a top-level directory called
<code>data</code>, with subdirectories for various file types; see
&#8220;Examples&#8221;.</p></td>
    </tr>
    <tr>
      <th>age</th>
      <td><p>numeric value indicating how old a downloaded file
must be (in days), for it to be considered out-of-date.  The
default, <code>age=1</code>, limits downloads to once per day, as a way
to avoid slowing down a workflow with a download that might take
a minute or so. Note that setting <code>age=0</code> will force a new
download, regardless of the age of the local file, and that
age is changed to 0 if <code>keep</code> is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>logical value indicating whether to silence some
progress indicators.  The default is to show such indicators.</p></td>
    </tr>
    <tr>
      <th>keep</th>
      <td><p>logical value indicating whether to retain the
raw index file as downloaded from the server.  This is <code>FALSE</code>
by default, indicating that the raw index file is to be
discarded once it has been analysed.  Note that if <code>keep</code>
is <code>TRUE</code>, then the supplied value of <code>age</code> is converted
to 0, to force a new download.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>integer value indicating level of debugging. If this
is less than 1, no debugging is done. Otherwise, some functions
will print debugging information.  If a function call fails, the
first step should be to rerun the function with <code>debug=1</code>,
to see if the output suggests a problem in the call.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code><a href='argoFloats-class.html'>argoFloats</a></code> with type=<code>"index"</code>, which
is suitable as the first argument of <code><a href='getProfiles.html'>getProfiles()</a></code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The first step is to construct a URL for downloading, based on the
<code>url</code> and <code>file</code> arguments. That URL will be a string ending in <code>.gz</code>,
or <code>.txt</code> and from this the name of a local file is constructed by changing the
suffix to <code>.rda</code> and prepending the file directory specified by
<code>destdir</code>.  If an <code>.rda</code> file of that name already exists, and is less
than <code>age</code> days old, then no downloading takes place. This caching
procedure is a way to save time, because the download can take from a
minute to an hour, depending on the bandwidth of the connection to the
server.</p>
<p>The resultant <code>.rda</code> file, which is named in the return value of this
function, holds a list named <code>index</code> that holds following elements:</p><ul>
<li><p><code>ftpRoot</code>, the FTP root stored in the header of the source <code>file</code>
(see next paragraph).</p></li>
<li><p><code>server</code>, the URL at which the index was found, and from
which <code><a href='getProfiles.html'>getProfiles()</a></code> can construct URLs from which to
download the netcdf files for individual float profiles.</p></li>
<li><p><code>filename</code>, the argument provided here.</p></li>
<li><p><code>header</code>, the preliminary lines in the source file that start
with the <code>#</code> character.</p></li>
<li><p><code>data</code>, a data frame containing the items in the source file.
The names of these items are determined automatically from
<code>"core"</code>,<code>"bgcargo"</code>, <code>"synthetic"</code> files.</p></li>
</ul>

<p>Some expertise is required in deciding on the value for the
<code>file</code> argument to <code>getIndex()</code>.  As of June 2020, the
FTP sites
<a href='ftp://usgodae.org/pub/outgoing/argo'>ftp://usgodae.org/pub/outgoing/argo</a>
and
<a href='ftp://ftp.ifremer.fr/ifremer/argo'>ftp://ftp.ifremer.fr/ifremer/argo</a>
contain multiple index files, as listed in the left-hand column of the
following table. The middle column lists nicknames
for some of the files.  These can be provided as the <code>file</code> argument,
as alternatives to the full names.
The right-hand column describes the file contents.
Note that the servers also provide files with names similar to those
given in the table, but ending in <code>.txt</code>.  These are uncompressed
equivalents of the <code>.gz</code> files that offer no advantage and take
longer to download, so <code>getIndex()</code> is not designed to work with them.</p><table class='table'>
<tr><td><em>File Name</em></td><td><em>Nickname</em></td><td><em>Contents</em></td></tr>
<tr><td><code>ar_greylist.txt</code></td><td>-</td><td>Suspicious/malfunctioning floats</td></tr>
<tr><td><code>ar_index_global_meta.txt.gz</code></td><td>-</td><td>Metadata files</td></tr>
<tr><td><code>ar_index_global_prof.txt.gz</code></td><td><code>"argo"</code> or <code>"core"</code></td><td>Argo data</td></tr>
<tr><td><code>ar_index_global_tech.txt.gz</code></td><td>-</td><td>Technical files</td></tr>
<tr><td><code>ar_index_global_traj.txt.gz</code></td><td>-</td><td>Trajectory files</td></tr>
<tr><td><code>argo_bio-profile_index.txt.gz</code></td><td><code>"bgc"</code> or <code>"bgcargo"</code></td><td>Biogeochemical Argo data (without S or T)</td></tr>
<tr><td><code>argo_bio-traj_index.txt.gz</code></td><td>-</td><td>Bio-trajectory files</td></tr>
<tr><td><code>argo_synthetic-profile_index.txt.gz</code></td><td><code>"synthetic"</code></td><td>Synthetic data, successor to <code>"merge"</code></td></tr>
</table>


<p>Note: as of Dec 01,2020 the user will no longer have the option to use <code>"argo"</code> as a filename argument. Instead, <code>"core"</code> will
be used.</p>
<p>The next step after using <code>getIndex()</code> is usually to
use <code><a href='getProfiles.html'>getProfiles()</a></code>, which downloads or checks for local
copies of the per-profile data files that are listed in an
index, and this is typically followed by a call to
<code><a href='readProfiles.html'>readProfiles()</a></code>, which reads the local files, yielding
an object that can be plotted or analysed in other ways.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Dan Kelley</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Download an index of synthetic argo/bgc-argo floats, and plot temporal coverage.</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ArgoCanada/argoFloats'>argoFloats</a></span><span class='op'>)</span>
<span class='va'>i</span> <span class='op'>&lt;-</span> <span class='fu'>getIndex</span><span class='op'>(</span><span class='st'>"synthetic"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>i</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/hist.html'>hist</a></span><span class='op'>(</span><span class='va'>i</span><span class='op'>[[</span><span class='st'>"date"</span><span class='op'>]</span><span class='op'>]</span>, breaks<span class='op'>=</span><span class='st'>"years"</span>, main<span class='op'>=</span><span class='st'>""</span>, xlab<span class='op'>=</span><span class='st'>"Time"</span>, freq<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dan Kelley, Jaimie Harbin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


