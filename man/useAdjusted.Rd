% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc.R
\name{useAdjusted}
\alias{useAdjusted}
\title{Switch unadjusted and adjusted data}
\usage{
useAdjusted(argo, which = "all", fallback = TRUE, debug = 0)
}
\arguments{
\item{argo}{an \code{\linkS4class{argoFloats}} object, as read by \code{\link[=readProfiles]{readProfiles()}}.}

\item{which}{a character vector (passed to
\code{\link[oce:preferAdjusted]{oce::preferAdjusted()}} directly) naming the items for which
(depending also on the value of \code{fallback}) adjusted values
are to be sought by future calls to \code{\link{[[,argoFloats-method}}.
The short names are used, e.g. \code{which="oxygen"} means that
adjusted oxygen is to be returned in future calls
such as \code{argo[["oxygen"]]}.  The default,
\code{"all"}, means to  use adjusted values for any item in \code{argo}
that has adjusted values.}

\item{fallback}{a logical value (passed to
\code{\link[oce:preferAdjusted]{oce::preferAdjusted()}} directly) indicating whether to fall back
to unadjusted values for any data field in which the
adjusted values are all \code{NA}.  The default value, \code{TRUE},
avoids a problem with biogeochemical fields, where adjustment
of any one field may lead to insertion of "adjusted" values for
other fields that consist of nothing more than \code{NA}s.}

\item{debug}{an integer that, if positive, indicates that some debugging information
should be printed.}
}
\description{
This is done by using \code{\link[oce:preferAdjusted]{oce::preferAdjusted()}} on each of the Argo
objects stored within the first argument.  The procedure is fairly
complicated, so users are urged to read the documentation
for \code{\link[oce:preferAdjusted]{oce::preferAdjusted()}} after reading the
sketch provided in the \dQuote{Details} section and to
familiarizing themselves with the flow chart below that demonstrates the
steps taken when a user specifies \code{which=ALL} or \verb{which=<param>}.
}
\details{
The value returned by \code{useAdjusted} is similar to the first argument
in all respects, except that the individual \code{argo} objects stored within
its \code{data} slot have their \code{metadata} slots modified to indicate a
preference for adjusted data over unadjusted data. Because of that,
future calls to \code{\link{[[,argoFloats-method}} will
return adjusted data instead of unadjusted data, for data items
specified by \code{which}, and subject to the constraint imposed by
\code{fallback}.

See the documentation for \code{\link[oce:preferAdjusted]{oce::preferAdjusted()}} for more
on the procedure, and see Reference 1 for the process of adding
adjusted data to Argo files.  Although it might seem that adjusted data
will always be preferable to unadjusted data, this is not always
the case, and a careful analyst will study both data streams, and
look through the processing notes for any float that is of individual
interest.

\if{html}{\figure{useAdjustedDiagram.png}{options: width=455px alt="Figure: useAdjustedDiagram.png"}}
}
\examples{
library(argoFloats)
# Plot raw and adjusted oxygen for a sample dataset
raw <- readProfiles(system.file("extdata", "SD5903586_001.nc", package="argoFloats"))
adj <- useAdjusted(raw)
adj1 <- raw[[1]]
raw1 <- adj[[1]]
plot(raw1[["oxygen"]], adj1[["oxygen"]] - raw1[["oxygen"]],
     xlab="Raw O2", ylab="Adj O2 - Raw O2")
summary(lm(adj1[["oxygen"]] ~ raw1[["oxygen"]]))

}
\references{
\enumerate{
\item Carval, Thierry, Bob Keeley, Yasushi Takatsuki, Takashi Yoshida, Stephen Loch Loch,
Claudia Schmid, and Roger Goldsmith. Argo Userâ€™s Manual V3.3. Ifremer, 2019.
\url{https://doi.org/10.13155/29825}.
}
}
\author{
Dan Kelley and Jaimie Harbin
}
