<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to argoFloats • argoFloats</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to argoFloats">
<meta property="og:description" content="argoFloats">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">argoFloats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/argoFloats.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/qc.html">Handling Quality Control Flags and Adjusted Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ArgoCanada/argoFloats/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="argoFloats_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="argoFloats_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="argoFloats_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to argoFloats</h1>
                        <h4 class="author">Dan Kelley (<a href="https://orcid.org/0000-0001-7808-5911" class="uri">https://orcid.org/0000-0001-7808-5911</a>), Jaimie Harbin (<a href="https://orcid.org/0000-0003-3774-3732" class="uri">https://orcid.org/0000-0003-3774-3732</a>) and Clark Richards (<a href="https://orcid.org/0000-0002-7833-206X" class="uri">https://orcid.org/0000-0002-7833-206X</a>)</h4>
            
            <h4 class="date">2020-12-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ArgoCanada/argoFloats/blob/master/vignettes/argoFloats.Rmd"><code>vignettes/argoFloats.Rmd</code></a></small>
      <div class="hidden name"><code>argoFloats.Rmd</code></div>

    </div>

    
    
<!-- HOW TO BUILD AND VIEW THE VIGNETTES.
1. Edit this file in vignettes/argoFloats.Rmd
2. Do not bother trying to build vignettes in RStudio. Instead,
   in a unix shell, type the following:
       R CMD build --compact-vignettes="qpdf" argoFloats
       R CMD install argoFloats_0.1.2.tar.gz
   where the version number may need adjustment in the second command.
3. To see the results, type the following in an R console:
      browseVignettes("argoFloats")
-->
<p><strong>Abstract.</strong> The <code>argoFloats</code> package makes it easy identify, download,cache, and analyze oceanographic data collected by Argo profiling floats, while handling quality control. Our goal in making this package was to eliminate the gap between the freely available Argo data and the end user.</p>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The <code>argoFloats</code> package provides tools for downloading and processing Argo profile data. It allows users to focus on Core, Biogeochemical (“BGC”) , or Deep Argo profiles, and also allows the user to sift these profiles based on ID, time, geography, variable, institution, ocean, cycle, direction, profile, or dataStateIndicator, etc. Once downloaded, such data sets can be analysed within <code>argoFloats</code> or using other R tools and packages.</p>
</div>
<div id="youtube-videos" class="section level1">
<h1 class="hasAnchor">
<a href="#youtube-videos" class="anchor"></a>Youtube Videos</h1>
<p>As an adjunct to the written documentation, the following videos are provided, to introduce concepts and show how to accomplish some every-day tasks. In some cases, sample code is also made available at <a href="https://github.com/ArgoCanada/argoFloats/tree/develop/videos" class="uri">https://github.com/ArgoCanada/argoFloats/tree/develop/videos</a>.</p>
<table class="table">
<colgroup>
<col width="43%">
<col width="21%">
<col width="10%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th>Video Name</th>
<th>Creators</th>
<th>Date</th>
<th>URL</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>argoFloats R 01: Introduction</td>
<td>Dan Kelley &amp; Jaimie Harbin</td>
<td>Apr 9, 2020</td>
<td><a href="https://youtu.be/xeBoFbb66Nk" class="uri">https://youtu.be/xeBoFbb66Nk</a></td>
</tr>
<tr class="even">
<td>argoFloats R 02: TS plot near Bermuda</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>Apr 24, 2020</td>
<td><a href="https://youtu.be/ZoTrVEMG5Qo" class="uri">https://youtu.be/ZoTrVEMG5Qo</a></td>
</tr>
<tr class="odd">
<td>argoFloats R 03: new website</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>Apr 30, 2020</td>
<td><a href="https://youtu.be/lOvCrRDTmTs" class="uri">https://youtu.be/lOvCrRDTmTs</a></td>
</tr>
<tr class="even">
<td>argoFloats R 04: subset by ocean or polygon</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>May 7, 2020</td>
<td><a href="https://youtu.be/tcGRB479Udk" class="uri">https://youtu.be/tcGRB479Udk</a></td>
</tr>
<tr class="odd">
<td>argoFloats R 05: TS diagram, colour-coded by oxygen</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>May 14, 2020</td>
<td><a href="https://youtu.be/Y_SxjcOnW04" class="uri">https://youtu.be/Y_SxjcOnW04</a></td>
</tr>
<tr class="even">
<td>argoFloats R 06: trajectory plot, colour coded by time</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>May 28, 2020</td>
<td><a href="https://youtu.be/7BB3UuwjUqo" class="uri">https://youtu.be/7BB3UuwjUqo</a></td>
</tr>
<tr class="odd">
<td>argoFloats R 07: maps with bathymetry</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>Jun 4, 2020</td>
<td><a href="https://youtu.be/Lc32MTMCbbI" class="uri">https://youtu.be/Lc32MTMCbbI</a></td>
</tr>
<tr class="even">
<td>argoFloats R 08: Introduction to quality control flags</td>
<td>Jaimie Harbin &amp; Dan Kelley</td>
<td>Aug 12, 2020</td>
<td><a href="https://youtu.be/nN4xs0wCnB4" class="uri">https://youtu.be/nN4xs0wCnB4</a></td>
</tr>
<tr class="odd">
<td>argoFloats R 09: Advanced Quality Control</td>
<td>Dan Kelley &amp; Jaimie Harbin</td>
<td>Aug 27, 2020</td>
<td><a href="https://youtu.be/dYzEO5S2GBw" class="uri">https://youtu.be/dYzEO5S2GBw</a></td>
</tr>
<tr class="even">
<td>argoFloats R 10: Using adjusted data streams</td>
<td>Dan Kelley &amp; Jaimie Harbin</td>
<td>Sep 3, 2020</td>
<td><a href="https://youtu.be/AuauWeUnopc" class="uri">https://youtu.be/AuauWeUnopc</a></td>
</tr>
<tr class="odd">
<td>argoFloats R 11: mapApp()</td>
<td>Dan Kelley &amp; Jaimie Harbin</td>
<td>Sep 21, 2020</td>
<td><a href="https://youtu.be/PEkIBwXLLpE" class="uri">https://youtu.be/PEkIBwXLLpE</a></td>
</tr>
<tr class="even">
<td>argoFloats R 12: dataStateIndicator()</td>
<td>Dan Kelley &amp; Jaimie Harbin</td>
<td>Nov 13, 2020</td>
<td><a href="https://youtu.be/RhLmT5S_XzU" class="uri">https://youtu.be/RhLmT5S_XzU</a></td>
</tr>
</tbody>
</table>
</div>
<div id="preliminary-setup" class="section level1">
<h1 class="hasAnchor">
<a href="#preliminary-setup" class="anchor"></a>Preliminary Setup</h1>
<p>To set up a computer to use <code>argoFloats</code>, the user should first install the following packages (<em>Hint:</em> you may have to use the <code><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv(R_REMOTES_NO_ERRORS_FROM_WARNINGS=TRUE)</a></code> command if you receive a Zero Exit Status Error):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"dankelley/oce"</span>, ref<span class="op">=</span><span class="st">"develop"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"dankelley/ocedata"</span>, ref<span class="op">=</span><span class="st">"develop"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"ArgoCanada/argoFloats"</span>, ref<span class="op">=</span><span class="st">"develop"</span><span class="op">)</span></code></pre></div>
<p>The above will fail unless the <code>remotes</code> package has been installed with</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">remotes</span><span class="op">)</span></code></pre></div>
<p>at some time in the past. (This need only be installed once.)</p>
</div>
<div id="work-flow" class="section level1">
<h1 class="hasAnchor">
<a href="#work-flow" class="anchor"></a>Work Flow</h1>
<p>Figure 1 illustrates the typical workflow with the package, with descriptions of the steps on the left, and names of the relevant functions on the right.</p>
<div class="figure">
<img src="flowchart.png" alt=""><p class="caption">Figure 1: Work flow of the argoFloats package</p>
</div>
<p>As shown above, the central functions for the <code>argoFloats</code> package are <code><a href="../reference/getIndex.html">getIndex()</a></code>, <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code>, <code><a href="../reference/getProfiles.html">getProfiles()</a></code>, and <code><a href="../reference/readProfiles.html">readProfiles()</a></code>.</p>
<p>Some built-in data sets are provided for concreteness of illustration and for testing, but actual work always starts with a call to <code><a href="../reference/getIndex.html">getIndex()</a></code> to download a full index of float data, which we will demonstrate later in this vignette.</p>
<p>To begin to get familiar with how the <code>argoFloats</code> package works, we will begin looking at the built in data sets. Built into the <code>argoFloats</code> package is the <code>index</code>, <code>indexBgc</code>, <code>indexSynthetic</code>, and <code>indexDeep</code> indices, referring to core Argo, BGC-Argo, and a combination, deep Argo respectively. It should be noted that as of September 21, 2020, <code>indexMerged</code> no longer exists as the switch to <code>indexSynthetic</code> has been made. For the sake of this vignette we will focus on the <code>index</code> data set.</p>
<p>The first step is to access the required packages that will be needed during this tutorial, with</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce">oce</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/ocedata">ocedata</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ArgoCanada/argoFloats">argoFloats</a></span><span class="op">)</span></code></pre></div>
<p>To access the embedded index within <code>argoFloats</code>, the following code is used:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"index"</span><span class="op">)</span></code></pre></div>
<p>It is now possible to process the downloaded index using the <code>argoFloats</code> specialized versions of R “generic” functions, <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code>, <code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code>, <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, and <code>show()</code> as shown below.</p>
</div>
<div id="overview-of-processing-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#overview-of-processing-steps" class="anchor"></a>Overview of Processing Steps</h1>
<p>The following subsections use built-in data.</p>
<div id="plotting" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting" class="anchor"></a>Plotting</h2>
<p>The specialized <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> command within the <code>argoFloats</code> package provides simple ways to plot aspects of <code>argoFloats-class</code> objects. To produce the built in plot and visualize the coordinates of a section of Argo floats off of the Bahamas, the following code is used:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">index</span>, bathymetry<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>          <span class="co"># also, try using bathymetry=TRUE</span></code></pre></div>
<div class="figure">
<img src="argoFloats_files/figure-html/unnamed-chunk-6-1.png" alt="Figure 2: Built in index demonstrating Argo profiling floats within 200 km of Bahamas." width="700"><p class="caption">
Figure 2: Built in index demonstrating Argo profiling floats within 200 km of Bahamas.
</p>
</div>
</div>
<div id="extracting-data" class="section level2">
<h2 class="hasAnchor">
<a href="#extracting-data" class="anchor"></a>Extracting Data</h2>
<p>Furthermore, the <code><a href="https://rdrr.io/r/base/Extract.html">[[</a></code> command provides a way to extract items from <code>argoFloats</code> objects, without getting lost in the details of storage. For example, if the user wanted to extract the <code>file</code> within the <code>index</code> data set, instead of doing <code>index@data$index$file</code>, instead they can simply do <code>index[["file"]]</code>. (Note that <code>[[&lt;-</code> is <em>not</em> specialized, since the user is highly discouraged from altering values within <code>argoFloats</code> objects).</p>
</div>
<div id="summarizing" class="section level2">
<h2 class="hasAnchor">
<a href="#summarizing" class="anchor"></a>Summarizing</h2>
<p>Additionally, the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> command displays key features of <code>argoFloats-class</code> objects such as the type, server, file, URL etc. See <code>summary,argoFloats-method()</code> further details.</p>
</div>
<div id="printing" class="section level2">
<h2 class="hasAnchor">
<a href="#printing" class="anchor"></a>Printing</h2>
<p>Lastly, the <code>show()</code> command provides a one-line sketch of <code>argoFloats-class</code> objects. This gets used by the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function. For example if the user types in:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">index</span></code></pre></div>
<p>The following output occurs:</p>
<pre><code>argoFloats object of type "index" with 953 items</code></pre>
<p><strong>Hint:</strong> This command can be particularly useful when doing the <code><a href="https://rdrr.io/r/base/merge.html">merge()</a></code> command, which will be explained in greater detail further down.</p>
<p>It should be noted that the profile elements within <code>argoFloats</code> objects are stored as in the form of <code>argo</code> objects as defined by the <code>oce</code> package. This means that <code>argoFloats</code> users can rely on a wide variety of <code>oce</code> functions to analyse their data. The full suite of R tools is also available, and the vastness of that suite explains why <code>argoFloats</code> is written in R.</p>
</div>
</div>
<div id="function-details" class="section level1">
<h1 class="hasAnchor">
<a href="#function-details" class="anchor"></a>Function Details</h1>
<div id="getindex" class="section level2">
<h2 class="hasAnchor">
<a href="#getindex" class="anchor"></a>getIndex()</h2>
<p>Until this point, we have demonstrated how the user can become familiar with embedded indices. As previously described, however, actual work always starts with downloading a full index of float data. As shown by Figure 1, the <code><a href="../reference/getIndex.html">getIndex()</a></code> command is used to get an index of available Argo float profiles, either by downloading information from a data repository or by reusing an index (stored as an .rda file) that was prepared by a recent call to the function.</p>
<p>The <code><a href="../reference/getIndex.html">getIndex()</a></code> command works by specifying the server, with first trying the Ifremer server  and then the USGODAE server  if that does not work. The next step is to specify the file name. The table below can be obtained using <code>?getIndex()</code>. As shown, the user has the ability to write the specific file name from the server, or to simply use the embedded nicknames within the package: <code>"core"</code>, <code>"bgc"</code> or <code>"bgcargo"</code>, or <code>"synthetic"</code>. The following table summarizes the contents of the various files indicated by the <code>filename</code> argument.</p>
<table class="table">
<colgroup>
<col width="37%">
<col width="23%">
<col width="38%">
</colgroup>
<thead><tr class="header">
<th>File Name</th>
<th>Nickname</th>
<th>Contents</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>ar_greylist.txt</code></td>
<td>-</td>
<td>Suspicious/malfunctioning floats</td>
</tr>
<tr class="even">
<td><code>ar_index_global_meta.txt.gz</code></td>
<td>-</td>
<td>Metadata files</td>
</tr>
<tr class="odd">
<td><code>ar_index_global_prof.txt.gz</code></td>
<td><code>"core"</code></td>
<td>Argo data</td>
</tr>
<tr class="even">
<td><code>ar_index_global_tech.txt.gz</code></td>
<td>-</td>
<td>Technical files</td>
</tr>
<tr class="odd">
<td><code>ar_index_global_traj.txt.gz</code></td>
<td>-</td>
<td>Trajectory files</td>
</tr>
<tr class="even">
<td><code>argo_bio-profile_index.txt.gz</code></td>
<td>
<code>"bgc"</code> or <code>"bgcargo"</code>
</td>
<td>Biogeochemical data (without S or T)</td>
</tr>
<tr class="odd">
<td><code>argo_bio-traj_index.txt.gz</code></td>
<td>-</td>
<td>Biogeochemical trajectory files</td>
</tr>
<tr class="even">
<td><code>argo_synthetic-profile_index.txt.gz</code></td>
<td><code>"synthetic"</code></td>
<td>Synthetic data, successor to <code>"merge"</code>
</td>
</tr>
</tbody>
</table>
<p>Additionally, the <code>destdir</code> argument has a default of <code>~/data/argo</code>, where it should be noted that <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code> is a short cut for <code>C:\Users\</code>. See <code>?getIndex()</code> for further description about the additional arguments for this command.</p>
<p>To get the index from the Ifremer server, the following code is used:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ai</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getIndex.html">getIndex</a></span><span class="op">(</span><span class="st">"core"</span><span class="op">)</span></code></pre></div>
</div>
<div id="subset" class="section level2">
<h2 class="hasAnchor">
<a href="#subset" class="anchor"></a>subset()</h2>
<p>As shown by Figure 1, the next step when working with the <code>argoFloats</code> package is to use the <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> function to focus on a subset of profiles. The <code>argoFloats</code> package provides tools to sift through profiles based on ID, time, geography, variable, institution, ocean, dataMode, cycle, direction, profile, and dataStateIndicator.</p>
<p>For geographic subsetting, the user has the ability to subset by <code>circle</code>, <code>rectangle</code>, or <code>polygon</code>.</p>
<p>To subset for specific groups of Argo profiling floats off the coast of Bahamas, the following code is used:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Subsetting by circle</span>
<span class="va">aiCircle</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, circle<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>longitude<span class="op">=</span><span class="op">-</span><span class="fl">77.5</span>, latitude<span class="op">=</span><span class="fl">27.5</span>, radius<span class="op">=</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Subsetting by polygon</span>
<span class="va">lonPoly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">76.5</span>, <span class="op">-</span><span class="fl">76.0</span>, <span class="op">-</span><span class="fl">75.5</span><span class="op">)</span>
<span class="va">latPoly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25.5</span>, <span class="fl">26.5</span>, <span class="fl">25.5</span><span class="op">)</span>
<span class="va">aiPoly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, polygon<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>longitude<span class="op">=</span><span class="va">lonPoly</span>, latitude<span class="op">=</span><span class="va">latPoly</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Plotting the subsets together</span>
<span class="va">CP</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">aiCircle</span>, <span class="va">aiPoly</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">CP</span>, bathymetry<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>             <span class="co"># also, try using bathymetry=TRUE</span></code></pre></div>
<div class="figure">
<img src="argoFloats_files/figure-html/unnamed-chunk-10-1.png" alt="Figure 3: 50 km radius and polygon subset of Argo profiling floats found off the coast of Bahamas" width="700"><p class="caption">
Figure 3: 50 km radius and polygon subset of Argo profiling floats found off the coast of Bahamas
</p>
</div>
<p><strong>Exercise 1:</strong> Use the subset by rectangle function to add a rectangle subset onto Figure 3 and subset all of the data to only include samples between 2012 and 2020.</p>
<p><strong>Note</strong></p>
<p>By combining subset by <code>rectangle</code> and subset by <code>time</code>, it is possible to determine which sampling method would be beneficial for specific scientific questions. For example, Figure 4 shows a comparison between Argo data and CTD section data. This type of plot reveals many pros and cons of each sampling method.</p>
<p><strong>Exercise 2:</strong> Use the information from Figure 4 to compare Argo and CTD section sampling methods.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dankelley.github.io/oce">oce</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ArgoCanada/argoFloats">argoFloats</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">section</span>, package<span class="op">=</span><span class="st">"oce"</span><span class="op">)</span>
<span class="co">#getIndex()</span>
<span class="va">ai</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getIndex.html">getIndex</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#subset by rectangtle</span>
<span class="va">latlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">36.2030</span>, <span class="fl">38.2373</span><span class="op">)</span>
<span class="va">lonlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.6727</span>, <span class="op">-</span><span class="fl">8.8263</span><span class="op">)</span> <span class="co"># from range(section[["longitude"]])</span>
<span class="va">index1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, rectangle<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>longitude<span class="op">=</span><span class="va">lonlim</span>, latitude<span class="op">=</span><span class="va">latlim</span><span class="op">)</span><span class="op">)</span>
<span class="co">#subset by time</span>
<span class="va">from</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="st">"2020-09-07"</span>, tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span>
<span class="va">to</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="st">"2020-12-07"</span>, tz<span class="op">=</span><span class="st">"UTC"</span><span class="op">)</span>
<span class="va">index2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">index1</span>, time<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>from<span class="op">=</span><span class="va">from</span>, to<span class="op">=</span><span class="va">to</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">index2</span>,bathymetry<span class="op">=</span><span class="cn">FALSE</span>, mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span><span class="st">"mar"</span><span class="op">)</span>,  asp<span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">index2</span><span class="op">[[</span><span class="st">"latitude"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="va">pi</span><span class="op">/</span><span class="fl">180</span><span class="op">)</span>,  mgp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">"oceMgp"</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">section</span>, which<span class="op">=</span><span class="st">"map"</span>, mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span><span class="st">"mar"</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"tan"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="01_section_argo.png" alt=""><p class="caption">Figure 4: Comparison of Argo vs. CTD section data in a westward transect from the Mediterranean outflow region across to North Atlantic. Top: Argo data including 152 samples from 2020-09-07 to 2020-12-06 made by the argoFloats package. Bottom: Line A03 section including 124 CTD samples from 1993-09-23 to 1993-10-25 made by oce package</p>
</div>
</div>
<div id="getprofiles" class="section level2">
<h2 class="hasAnchor">
<a href="#getprofiles" class="anchor"></a>getProfiles()</h2>
<p>The next step within the <code>argoFloats</code> package is the <code><a href="../reference/getProfiles.html">getProfiles()</a></code> function. This takes an index constructed with <code><a href="../reference/getIndex.html">getIndex()</a></code>, possibly after focusing with <code>subset,argoFloats-method()</code>, and creates a list of files to download from the server named in the index. Then these files are downloaded to the <code>destdir</code> directory, using filenames inferred from the source filenames. The value returned by <code><a href="../reference/getProfiles.html">getProfiles()</a></code> is suitable for use by <code><a href="../reference/readProfiles.html">readProfiles()</a></code> function.</p>
</div>
<div id="readprofiles" class="section level2">
<h2 class="hasAnchor">
<a href="#readprofiles" class="anchor"></a>readProfiles()</h2>
<p>The <code><a href="../reference/readProfiles.html">readProfiles()</a></code> command works with either a list of local netCDF files, or a <code>argoFloats</code> object type <code>profiles</code>, as created by <code><a href="../reference/getProfiles.html">getProfiles()</a></code>.</p>
<p>The command can be useful for analyzing individual profiles, for example:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">index1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">index</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="co"># To subset for profiles</span>
<span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getProfiles.html">getProfiles</a></span><span class="op">(</span><span class="va">index1</span><span class="op">)</span>
<span class="va">argos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readProfiles.html">readProfiles</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span>
<span class="va">argosClean</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/applyQC.html">applyQC</a></span><span class="op">(</span><span class="va">argos</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">argosClean</span>, which<span class="op">=</span><span class="st">"profile"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="readProfiles.png" alt=""><p class="caption">Figure 5: Temperature profile created using argoFloats readProfiles function</p>
</div>
<p><strong>Exercise 3:</strong> Using the profile in the previous example, plot a TS diagram.</p>
</div>
</div>
<div id="solutions-to-exercises" class="section level1">
<h1 class="hasAnchor">
<a href="#solutions-to-exercises" class="anchor"></a>Solutions to Exercises</h1>
<p><strong>Exercise 1:</strong> Use the subset by rectangle function to add a rectangle subset onto Figure 3 and subset all of the data to only include data between 2012 and 2020.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ArgoCanada/argoFloats">argoFloats</a></span><span class="op">)</span>
<span class="va">ai</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getIndex.html">getIndex</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># Subset by circle</span>
<span class="va">index1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, circle<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>longitude<span class="op">=</span><span class="op">-</span><span class="fl">77.5</span>, latitude<span class="op">=</span><span class="fl">27.5</span>, radius<span class="op">=</span><span class="fl">50</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Subset by polygon</span>
<span class="va">lonPoly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">76.5</span>, <span class="op">-</span><span class="fl">76.0</span>, <span class="op">-</span><span class="fl">75.5</span><span class="op">)</span>
<span class="va">latPoly</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25.5</span>, <span class="fl">26.5</span>, <span class="fl">25.5</span><span class="op">)</span>
<span class="va">index2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, polygon<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>longitude<span class="op">=</span><span class="va">lonPoly</span>, latitude<span class="op">=</span><span class="va">latPoly</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Subset by rectangle</span>
<span class="va">lonRect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">76.5</span>, <span class="op">-</span><span class="fl">76</span><span class="op">)</span>
<span class="va">latRect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">27</span>, <span class="fl">28</span><span class="op">)</span>
<span class="va">index3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, rectangle<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>longitude<span class="op">=</span><span class="va">lonRect</span>, latitude<span class="op">=</span><span class="va">latRect</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Merge the subsets together</span>
<span class="va">index4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">index1</span>, <span class="va">index2</span><span class="op">)</span>
<span class="va">index5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">index3</span>, <span class="va">index4</span><span class="op">)</span> <span class="co"># Note right now can only merge 2 indices together</span>
<span class="co"># Subset for year 2012-2020</span>
<span class="va">index6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">index5</span>, time<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>from<span class="op">=</span><span class="st">"2012-01-01"</span>, to<span class="op">=</span><span class="st">"2020-01-01"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Plot data</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">index6</span>, bathymetry<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>             <span class="co"># also, try using bathymetry=TRUE</span></code></pre></div>
<p><strong>Exercise 2:</strong> Use the information from Figure 4 to compare Argo and CTD section sampling methods.</p>
<p>Figure 4 reveals that it takes 3 months (from todays current date, 2020-12-06) of Argo sampling to reproduce a 1 month CTD section cruise. Additionally, it displayed that there are geographical gaps within the Argo data. On the other hand, it should be noted that by extending the latitude range, these gaps are quickly filled in. Additionally, Argo sampling is much more cost effective, and it can allow for collection of more information (ie. nutrients, oxygen, backscattering, etc.) if such thing is desired.</p>
<p><strong>Exercise 3:</strong> Using the profile in the previous example, plot a TS diagram.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ArgoCanada/argoFloats">argoFloats</a></span><span class="op">)</span>
<span class="va">ai</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getIndex.html">getIndex</a></span><span class="op">(</span><span class="st">"synthetic"</span><span class="op">)</span>
<span class="va">sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">ai</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="co"># To subset for profiles</span>
<span class="va">profiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getProfiles.html">getProfiles</a></span><span class="op">(</span><span class="va">sub</span><span class="op">)</span>
<span class="va">argos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readProfiles.html">readProfiles</a></span><span class="op">(</span><span class="va">profiles</span><span class="op">)</span>
<span class="va">argosClean</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/applyQC.html">applyQC</a></span><span class="op">(</span><span class="va">argos</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">argosClean</span>, which<span class="op">=</span><span class="st">"TS"</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dan Kelley, Jaimie Harbin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
